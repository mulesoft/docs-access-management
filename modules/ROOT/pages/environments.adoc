= Environments
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

Anypoint Platform enables you to create and manage separate deployment environments for APIs and applications.  These environments are independent from each other and enable you to test your applications under the same conditions as your production environment.

== Types of Environments

Anypoint Platform supports the following types of environments:

* **Production environment**: Provides a production environment where you can deploy applications and APIs publicly. When you create a new Anypoint Platform account, by default it contains one production environment.

* **Sandbox environment**: Provides useful environments for development and testing. By default, Anypoint Platform accounts are created with one sandbox environment with one vCore assigned to it.
+
Sandbox environments enable you to safely test an application without affecting the production environment. For example, you can create a sandbox environment for a QA team where they can test new releases of applications before deploying in production. You can add users to a sandbox environment without permitting them to access the production environment. This helps to secure your production environment and eliminate the risk of a developer accidentally changing an application in production. Once you are sure an application is safe to expose to users, you can easily promote the application from a sandbox environment to a production environment.

* **Design environment**: Enables you to test and run applications at design time. This environment is used by the Design Center application. By default, a new Anypoint Platform account contains one design environment with one vCore assigned to it. Only applications deployed from Design Center can target this environment; you can't deploy an application to a runtime registered in the Design environment using Runtime Manager.

== Adding Users to an Environment

You cannot grant users access to an environment directly. To grant a user access to an environment use role permissions. See xref:roles.adoc#assigning-permissions-to-roles[Assigning Permissions to Roles] for more information.

== To Create a New Environment

To create a new environment or manage an existing environment:

. Sign into Anypoint Platform with an Organization Administrators role.
. Go to Access Management.
. In the menu on the left, click *Environments*.
. Click *Add Environment*.
. Enter a name for the environment.
. Select the environment type.
. Optionally, select at least one xref:managing-api-clients.adoc[client provider] for your environment.
. Optionally, if you added more than one client provider, click *Set as default* to designate a default client provider.
. Click *Create*.

image::environments-85dc3.png[]

[NOTE]
Depending on your CloudHub subscription, you may have restrictions on the number and type of environments you can create.

== To Modify or Delete an Existing Environment

. Go to Access Management.
. In the menu on the left, click *Environments*.
. Click the name of the environment. You can perform one of the following actions:
+
* Modify the environment:
** Enter a new name for the environment.
** Add at least one client provider.
** Designate a default client provider if the environment uses more than one client provider.
+
Click *Update* to save your changes.
* Click *Delete* to delete the environment.

== To View the Client ID and Client Secret for an Environment

Each environment has a client ID and a client secret used for authentication. You must use these values to  configure a customer-hosted Mule Runtime or legacy API Gateway to be able to deploy proxies or APIs to CloudHub.

To view the client ID and secret for your environment:

. Log in to the Anypoint Platform as an administrator.
. Go to Access Management.
. In the menu on the left, click *Environments*.
. Click the name of the environment whose client ID/secret you want to view.

[NOTE]
--
To change the client ID or client secret of an environment, you must contact your customer support representative.
--

[[add-an-idp-to-an-existing-environment]]
== Add a Client Provider to an Existing Environment

If your organization administrator provides multiple xref:managing-api-clients.adoc[client providers] for your organization, you can add them to existing environments.

To add a client provider to an existing environment:

. Log in to the Anypoint Platform as an administrator.
. Go to Access Management.
. In the menu on the left, click *Environments*.
. Click the name of the environment.
. In the *Client Provider* field, select at least one client provider.
. If you added more than one client provider, click *Set as default* to designate a default client provider.
. Click *Update*.

[[remove-an-idp-from-an-environment]]
== Remove a Client Provider from an Environment

You can remove a client provider from an environment at any time.
When you remove your default client provider from an environment that has more than one client provider, the next client provider is automatically named as your new default client provider.
When you remove all external client providers from an environment, the Anypoint Platform client provider becomes the default client provider for that environment.

. Go to Access Management.
. In the menu on the left, click *Environments*.
. Click the name of the environment.
. Click the *x* next to the client provider that you want to remove.
. Click *Update*.
